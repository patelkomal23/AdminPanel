<%- include('../partials/header.ejs') %>

  <div class="page-wrapper">

    <!-- ================= PAGE BREADCRUMB ================= -->
    <div class="page-breadcrumb">
      <div class="row">
        <div class="col-12 d-flex align-items-center">
          <h4 class="page-title">Edit Profile</h4>

          <div class="ms-auto">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item active">Edit Profile</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>

    <!-- ================= PAGE CONTENT ================= -->
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-md-7">

          <div class="card shadow-sm rounded-4">

            <!-- ================= FORM ================= -->
            <form method="POST" action="/edit-profile" enctype="multipart/form-data">

              <div class="card-body">

                <!-- Profile Image -->
                <div class="text-center mb-4">
                  <img src="<%= user.image ? user.image : '/images/default-user.png' %>" class="rounded-circle mb-3"
                    width="120" height="120" alt="Profile Image" />

                  <input type="file" name="image" class="form-control" accept="image/*" />
                </div>

                <!-- Username -->
                <div class="mb-3">
                  <label class="form-label">Username</label>
                  <input type="text" name="username" value="<%= user.username %>" class="form-control" required />
                </div>

                <!-- Email -->
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" name="email" value="<%= user.email %>" class="form-control" required />
                </div>

                <!-- Mobile -->
                <div class="mb-3">
                  <label class="form-label">Mobile</label>
                  <input type="text" name="phone" value="<%= user.Mobile || '' %>" class="form-control" />
                </div>

                <!-- Date of Birth -->
                <div class="mb-3">
                  <label class="form-label">Date of Birth</label>
                  <input type="date" name="dob"
                    value="<%= user.DOB ? new Date(user.DOB).toISOString().substring(0,10) : '' %>"
                    class="form-control" />
                </div>

                <!-- Gender -->
                <div class="mb-3">
                  <label class="form-label">Gender</label>
                  <select name="gender" class="form-select">
                    <option value="">Select</option>
                    <option value="Male" <%=user.gender==='Male' ? 'selected' : '' %>>Male</option>
                    <option value="Female" <%=user.gender==='Female' ? 'selected' : '' %>>Female</option>
                    <option value="Other" <%=user.gender==='Other' ? 'selected' : '' %>>Other</option>
                  </select>
                </div>

                <!-- Bio -->
                <div class="mb-3">
                  <label class="form-label">Bio</label>
                  <textarea name="bio" rows="3" class="form-control"><%= user.Bio || '' %></textarea>
                </div>

              </div>

              <!-- ================= FOOTER ================= -->
              <div class="card-footer text-end">
                <a href="/profile" class="btn btn-outline-secondary me-2">
                  Cancel
                </a>
                <button type="submit" class="btn btn-primary">
                  Update Profile
                </button>
              </div>

            </form>
            <!-- ================= FORM END ================= -->

          </div>

        </div>
      </div>
    </div>

  </div>

  <%- include('../partials/footer.ejs') %>